import{r as o,R as h,u as se,j as e,ak as te,L as re,z as m,b}from"./vendor-react-CbqZeeub.js";import{G as R,D as ae}from"./vendor-pUXXxmew.js";import{u as U}from"./app-oNa4-Uj0.js";import{B as le}from"./Breadcrumb-DtFmv9ws.js";import{P as ie}from"./ProductCard-DGNc5g26.js";import{S as oe}from"./Skeleton-DWxpNhIk.js";import"./vendor-swiper-Ny51Tdo0.js";/* empty css            */const fe=({product:r,reviews:M=[],relatedProducts:D=[]})=>{const[E,j]=o.useState({}),[A,p]=o.useState(!0),t={...r,description:r.long_description||r.description,shortDesc:r.short_description||r.shortDesc,price:r.effective_price||r.price||0,oldPrice:r.effective_price<r.price?r.price:null,rating:Number(r.reviews_avg_rating)||0,reviewCount:Number(r.reviews_count)||M.length||0,colors:r.colors||[],sizes:r.sizes||[],stock:r.qty||0},n=h.useMemo(()=>{if(t.colors&&t.colors.length>0)return t.colors;const s=(r.product_image_galleries||[]).filter(l=>l.color).map(l=>l.color),a=[],i=new Set;return s.forEach(l=>{i.has(l.id)||(i.add(l.id),a.push(l))}),a},[t.colors,r.product_image_galleries]),[g,v]=o.useState(0),[d,y]=o.useState(""),[x,B]=o.useState(""),[u,T]=o.useState(1),[N,V]=o.useState("description"),[w,ne]=o.useState(!1),[_,F]=o.useState(!1);h.useEffect(()=>{v(0),j({}),p(!0)},[r.id]),h.useEffect(()=>{n.length>0&&!d&&y(n[0].color_name)},[n]),h.useEffect(()=>{t.sizes.length>0&&!x&&B(t.sizes[0].size_name)},[t.sizes]);const[k,W]=o.useState(0),[S,K]=o.useState(""),[H,G]=o.useState(!1),[z,C]=o.useState(!1),{auth:I,settings:$}=se().props,O=s=>s?s.startsWith("http")||s.startsWith("/storage/")||s.startsWith("/uploads/")?s:s.startsWith("storage/")||s.startsWith("uploads/")?`/${s}`:`/storage/${s.startsWith("/")?s.substring(1):s}`:null,q=h.useMemo(()=>{const s=(r.product_image_galleries||[]).map(a=>O(a.image));return s.length>0?s:[O(r.thumb_image)].filter(Boolean)},[r.product_image_galleries,r.thumb_image]),Q=({className:s=""})=>e.jsxs("div",{className:`w-full h-full bg-gray-100 flex flex-col items-center justify-center gap-3 p-6 ${s}`,children:[e.jsx("svg",{className:"w-16 h-16 text-gray-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.587-1.587a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})}),e.jsx("span",{className:"text-sm font-medium text-gray-400 uppercase tracking-widest",children:"No Image available"})]}),J=s=>{if(s.preventDefault(),!I?.user){b.visit("/customer/login");return}if(k===0||!S.trim()){m.error("Please select a rating and write your review");return}C(!0),b.post("/review",{product_id:r.id,rating:k,review:S},{onSuccess:()=>{C(!1),G(!0),W(0),K(""),m.success("Review submitted! It will be visible after approval.")},onError:()=>{C(!1)},preserveScroll:!0})},Y=async(s=!1)=>{if(w||_)return;if(n.length>0&&!d){m.error("Please select a color");return}if(t.sizes.length>0&&!x){m.error("Please select a size");return}const a=n.find(c=>c.color_name===d),i=t.sizes.find(c=>c.size_name===x),l={product_id:r.id,qty:u,color_id:a?.id||null,size_id:i?.id||null},f=parseFloat(a?.pivot?.color_price||0)+parseFloat(i?.pivot?.size_price||0);if(s){F(!0);const{addItem:c}=U.getState();c(r,u,{color_id:l.color_id,size_id:l.size_id,color_name:d,size_name:x,variant_total:f}),b.post(R("cart.add"),l,{onSuccess:()=>{b.visit(R("checkout"))},onError:P=>{F(!1);const ee=Object.values(P)[0]||"Something went wrong";m.error(ee)},onFinish:()=>{},preserveScroll:!0});return}const{addItem:Z}=U.getState();Z(r,u,{color_id:l.color_id,size_id:l.size_id,color_name:d,size_name:x,variant_total:f}),m.success("Product added to cart!",{id:"cart-toast"});try{await ae.post(R("cart.add"),l)}catch(c){console.error("Cart sync error:",c);const P=c.response?.data?.message||"Failed to sync cart";m.error(P,{id:"cart-toast"})}},X=()=>{Y(!0)},L=q[g];return e.jsx("div",{className:"min-h-screen bg-gray-50",children:e.jsxs("div",{className:"container px-4 sm:px-6 lg:px-8 py-6 md:py-10",children:[e.jsx(le,{customItems:[{name:t.name}]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8 xl:gap-12",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"bg-white rounded-xl overflow-hidden border border-gray shadow-sm aspect-square relative",children:L&&!E[g]?e.jsxs(e.Fragment,{children:[e.jsx("img",{src:L,alt:"",className:"hidden",onLoad:()=>p(!1),onError:()=>{p(!1),j(s=>({...s,[g]:!0}))}}),A&&e.jsx(oe,{className:"absolute inset-0 z-10"}),e.jsx(te,{src:L,alt:`${t.name} - ${d}`,zoom:"200",className:`w-full h-full object-contain ${A?"opacity-0":"opacity-100"}`})]}):e.jsx(Q,{})}),e.jsx("div",{className:"grid grid-cols-4 gap-3",children:q.map((s,a)=>e.jsx("button",{onClick:()=>{g!==a&&(p(!0),v(a));const i=r.product_image_galleries?.[a];if(i&&i.color_id){const l=n.find(f=>parseInt(f.id)===parseInt(i.color_id));l&&y(l.color_name)}},className:`
                    aspect-square rounded-lg overflow-hidden border-2 transition-all duration-200
                    ${g===a?"border-red shadow-md scale-105":"border-gray hover:border-red-300"}
                  `,children:s&&!E[a]?e.jsx("img",{src:s,alt:"",onError:()=>j(i=>({...i,[a]:!0})),className:"w-full h-full object-cover"}):e.jsx("div",{className:"w-full h-full bg-gray-100 flex items-center justify-center",children:e.jsx("svg",{className:"w-6 h-6 text-gray-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.587-1.587a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})})})},a))})]}),e.jsxs("div",{className:"space-y-6 lg:sticky lg:top-6 self-start",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl md:text-3xl lg:text-4xl font-bold text-gray-900",children:t.name}),e.jsxs("div",{className:"mt-3 flex flex-wrap items-center gap-4",children:[r.active_campaign_product&&e.jsx("div",{className:"w-full mb-1",children:e.jsxs("span",{className:"bg-red text-white text-xs font-bold px-3 py-1 rounded shadow-sm uppercase",children:[r.active_campaign_product.discount_type==="percentage"?`${Math.round(r.active_campaign_product.discount_value)}% OFF`:`SAVE ${r.active_campaign_product.discount_value} ${$?.currency_icon||"DKK."}`," "," - CAMPAIGN PRICE"]})}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsxs("span",{className:"text-3xl md:text-4xl font-bold text-red",children:[$?.currency_icon||"DKK.",t.price]}),t.oldPrice&&t.oldPrice>0&&e.jsxs("span",{className:"text-xl text-gray-500 line-through",children:[$?.currency_icon||"DKK.",t.oldPrice]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"flex",children:[...Array(5)].map((s,a)=>e.jsx("svg",{className:`w-5 h-5 ${a<Math.floor(t.rating)?"text-yellow-400":"text-gray-300"}`,fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"})},a))}),e.jsxs("span",{className:"text-gray-600 font-medium",children:[t.rating," (",t.reviewCount," reviews)"]})]})]}),e.jsx("p",{className:"mt-4 text-gray-700",children:t.shortDesc}),e.jsx("div",{className:"mt-4",children:t.stock>0?e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:`flex h-2.5 w-2.5 rounded-full ${t.stock<=5?"bg-orange-500 animate-pulse":"bg-green-500"}`}),e.jsx("span",{className:`text-sm font-medium ${t.stock<=5?"text-orange-700":"text-green-700"}`,children:t.stock<=5?`Only ${t.stock} left in stock!`:`In Stock: ${t.stock}`})]}):e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"flex h-2.5 w-2.5 rounded-full bg-red-500"}),e.jsx("span",{className:"text-sm font-medium text-red-600 italic",children:"Currently Out of Stock"})]})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Color"}),e.jsx("div",{className:"flex flex-wrap gap-3",children:n.length>0?n.map(s=>e.jsx("button",{onClick:()=>{if(y(s.color_name),r.product_image_galleries){const a=r.product_image_galleries.findIndex(i=>parseInt(i.color_id)===parseInt(s.id));a!==-1&&v(a)}},className:`
                        w-10 h-10 rounded-full border-2 transition-all duration-200
                        ${d===s.color_name?"border-red scale-110 shadow-md":"border-gray-300 hover:border-gray-400"}
                      `,style:{backgroundColor:s.color_code?.startsWith("#")?s.color_code:`#${s.color_code}`},title:s.color_name},s.id||s.color_name)):e.jsx("span",{className:"text-gray-500 text-sm italic",children:"No available color"})})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Size"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:t.sizes.length>0?t.sizes.map(s=>e.jsx("button",{onClick:()=>B(s.size_name),className:`
                        px-5 py-2.5 border rounded-md text-sm font-medium transition-all
                        ${x===s.size_name?"border-red bg-red-50 text-red":"border-gray hover:border-red-300"}
                      `,children:s.size_name},s.id||s.size_name)):e.jsx("span",{className:"text-gray-500 text-sm italic",children:"No available size"})})]}),e.jsxs("div",{className:"pt-4 space-y-5",children:[e.jsxs("div",{className:"flex items-center gap-6",children:[e.jsx("label",{className:"font-medium",children:"Quantity:"}),e.jsxs("div",{className:"flex border border-gray rounded-lg overflow-hidden",children:[e.jsx("button",{onClick:()=>T(s=>Math.max(1,s-1)),disabled:t.stock<=0,className:"w-12 h-11 flex items-center justify-center text-xl hover:bg-gray-100 disabled:opacity-50",children:"âˆ’"}),e.jsx("span",{className:"w-16 flex items-center justify-center font-medium",children:t.stock>0?u:0}),e.jsx("button",{onClick:()=>T(s=>Math.min(t.stock,s+1)),disabled:t.stock<=0||u>=t.stock,className:"w-12 h-11 flex items-center justify-center text-xl hover:bg-gray-100 disabled:opacity-50",children:"+"})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[e.jsx("button",{onClick:()=>Y(!1),disabled:w||t.stock<=0,className:`
                    flex-1 py-4 rounded-lg font-bold text-lg transition-all duration-200
                    flex items-center justify-center gap-2
                    ${t.stock<=0?"bg-gray-300 text-gray-500 cursor-not-allowed":"bg-red text-white hover:bg-red-800 active:scale-95 disabled:opacity-70"}
                  `,children:t.stock<=0?"Out of Stock":w?e.jsx("span",{className:"w-6 h-6 border-3 border-white/30 border-t-white rounded-full animate-spin"}):"Add to Cart"}),e.jsx("button",{onClick:X,disabled:_||t.stock<=0,className:`
                    flex-1 border-2 py-4 rounded-lg font-bold text-lg active:scale-95 transition-all duration-200
                    flex items-center justify-center gap-2
                    ${t.stock<=0?"border-gray-300 text-gray-400 cursor-not-allowed":"border-red text-red hover:bg-red-50"}
                  `,children:_?e.jsx("span",{className:"w-6 h-6 border-3 border-red/30 border-t-red rounded-full animate-spin"}):"Buy Now"})]}),e.jsxs("div",{className:"text-sm text-gray-600 space-y-1",children:[e.jsx("p",{children:"âœ“ Free shipping on orders over DKK 499"}),e.jsx("p",{children:"âœ“ 30 days easy return"}),e.jsx("p",{children:"âœ“ Secure payments"})]})]})]})]}),e.jsxs("div",{className:"mt-12 md:mt-16",children:[e.jsx("div",{className:"border-b border-gray",children:e.jsx("nav",{className:"flex flex-wrap gap-6 md:gap-10",children:["description","shipping"].map(s=>e.jsx("button",{onClick:()=>V(s),className:`
                    pb-3 px-1 font-medium text-lg transition-colors
                    ${N===s?"border-b-2 border-red text-red":"text-gray-600 hover:text-gray-900"}
                  `,children:s.charAt(0).toUpperCase()+s.slice(1)},s))})}),e.jsxs("div",{className:"py-8",children:[N==="description"&&e.jsx("div",{className:"prose max-w-none text-gray-700",children:e.jsx("div",{dangerouslySetInnerHTML:{__html:t.description}})}),N==="shipping"&&e.jsxs("div",{className:"space-y-4 text-gray-700",children:[e.jsx("p",{children:"Delivery time: 3-7 working days in Denmark & EU"}),e.jsx("p",{children:"Free shipping on orders above DKK 499"}),e.jsx("p",{children:"30 days hassle-free return policy"}),e.jsx("p",{children:"Track your order easily after purchase"})]})]})]}),e.jsxs("div",{className:"mt-16 border-t border-gray pt-12",children:[e.jsxs("h2",{className:"text-2xl md:text-3xl font-bold text-gray-900 mb-8",children:["Customer Reviews (",t.reviewCount,")"]}),e.jsx("div",{className:"grid md:grid-cols-2 lg:grid-cols-3 gap-6 mb-12",children:M.map(s=>e.jsxs("div",{className:"bg-white p-6 rounded-xl border border-gray shadow-sm",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsx("div",{className:"flex",children:[...Array(5)].map((a,i)=>e.jsx("svg",{className:`w-5 h-5 ${i<s.rating?"text-yellow-400":"text-gray-300"}`,fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"})},i))}),e.jsx("span",{className:"text-sm text-gray-500",children:new Date(s.created_at).toLocaleDateString()})]}),e.jsxs("p",{className:"text-gray-700 mb-4",children:['"',s.comment,'"']}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"font-medium",children:s.user?.name}),s.verified&&e.jsx("span",{className:"text-xs bg-green-100 text-green-800 px-2 py-1 rounded-full",children:"Verified Purchase"})]})]},s.id))}),e.jsxs("div",{className:"bg-white p-6 md:p-8 rounded-xl border border-gray shadow-sm",children:[e.jsx("h3",{className:"text-xl md:text-2xl font-bold text-gray-900 mb-6",children:"Write a Review"}),I?.user?H?e.jsxs("div",{className:"text-center py-8",children:[e.jsx("div",{className:"text-5xl mb-4",children:"ðŸŽ‰"}),e.jsx("h4",{className:"text-xl font-bold text-green-700 mb-2",children:"Thank you for your review!"}),e.jsx("p",{className:"text-gray-600",children:"Your feedback helps other customers make better decisions. Your review is currently pending approval."})]}):e.jsxs("form",{onSubmit:J,className:"space-y-6",children:[e.jsx("div",{children:e.jsxs("p",{className:"text-sm text-gray-600 mb-4 italic",children:["Posting as ",e.jsx("span",{className:"font-semibold text-gray-900",children:I.user.name})]})}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Your Rating *"}),e.jsx("div",{className:"flex gap-1",children:[1,2,3,4,5].map(s=>e.jsx("button",{type:"button",onClick:()=>W(s),className:"focus:outline-none",children:e.jsx("svg",{className:`w-8 h-8 transition-colors ${s<=k?"text-yellow-400":"text-gray-300 hover:text-yellow-300"}`,fill:"currentColor",viewBox:"0 0 20 20",children:e.jsx("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"})})},s))})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"reviewText",className:"block text-sm font-medium text-gray-700 mb-2",children:"Your Review *"}),e.jsx("textarea",{id:"reviewText",rows:5,value:S,onChange:s=>K(s.target.value),className:"w-full px-4 py-2 border border-gray rounded-lg focus:outline-none focus:border-red",placeholder:"Tell us about your experience with this product...",required:!0})]}),e.jsx("div",{className:"pt-4",children:e.jsx("button",{type:"submit",disabled:z,className:`bg-red text-white px-8 py-3 rounded-lg font-medium hover:bg-red-800 transition-colors ${z?"opacity-70 cursor-not-allowed":""}`,children:z?"Submitting...":"Submit Review"})}),e.jsx("p",{className:"text-sm text-gray-500",children:"Your review will be published after moderation. We appreciate honest feedback!"})]}):e.jsxs("div",{className:"text-center py-10 bg-gray-50 rounded-xl border border-dashed border-gray-300",children:[e.jsx("div",{className:"text-4xl mb-4 text-gray-400",children:"ðŸ”’"}),e.jsx("h4",{className:"text-lg font-semibold text-gray-700 mb-2",children:"Please login to write a review"}),e.jsx("p",{className:"text-gray-500 mb-6 max-w-xs mx-auto",children:"Only registered customers can share their experience with our products."}),e.jsx(re,{href:"/customer/login",className:"bg-red text-white px-8 py-3 rounded-lg font-medium hover:bg-red-800 transition-colors inline-block",children:"Login / Register Now"})]})]})]}),e.jsxs("div",{className:"mt-16 border-t border-gray pt-12 pb-16",children:[e.jsx("h2",{className:"text-2xl md:text-3xl font-bold text-gray-900 mb-8",children:"You May Also Like"}),e.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-6 gap-6",children:D.length>0?D.map(s=>e.jsx(ie,{product:s},s.id)):e.jsx("p",{className:"text-gray-500 italic col-span-full",children:"No related products found."})})]})]})})};export{fe as default};
