import{u as N,r as s,j as t,L as n,z as x}from"./vendor-react-CbqZeeub.js";import{D as w,G as k}from"./vendor-pUXXxmew.js";import{u as S}from"./app-jj7dnp1k.js";import{S as $}from"./Skeleton-DWxpNhIk.js";const A=({product:e,onImageLoad:a,forceLoading:h=!1})=>{const{settings:u}=N().props,{addItem:g}=S(),r=u?.currency_icon,[f,p]=s.useState(!1),[y,i]=s.useState(!0),[l,c]=s.useState(!1),o=y||h,[z,L]=s.useState(1),[I,q]=s.useState(!1),d=!e.qty||e.qty<=0,j=Number(e?.colors_count)>0||Number(e?.sizes_count)>0||Number(e?.product_image_galleries_count)>0||e?.colors?.length>0||e?.sizes?.length>0,b=async()=>{if(!(l||d)){g(e,1),x.success("Product added to cart!",{id:"cart-toast"}),c(!0);try{await w.post(k("cart.add"),{product_id:e.id,qty:1,size_id:null,color_id:null})}catch(m){console.error("Cart sync error:",m);const _=m.response?.data?.message||"Failed to sync cart";x.error(_,{id:"cart-toast"})}finally{c(!1)}}},v=j;return t.jsxs("div",{className:`
                bg-white rounded-xl overflow-hidden border border-black/30 shadow-lg hover:shadow-md 
                transition-all duration-300    
              `,children:[t.jsx("div",{className:"aspect-square relative bg-gray-100 overflow-hidden flex items-center justify-center",children:t.jsx(n,{href:`/product-details/${e.slug}`,prefetch:!0,className:"w-full h-full flex items-center justify-center",children:e.thumb_image&&!f?t.jsxs(t.Fragment,{children:[o&&t.jsx($,{className:"absolute inset-0 z-10"}),t.jsx("img",{src:e.thumb_image.startsWith("http")?e.thumb_image:e.thumb_image.startsWith("storage/")?`/${e.thumb_image}`:`/storage/${e.thumb_image}`,alt:e.name||"Product Image",onLoad:()=>{i(!1),a&&a()},onError:()=>{p(!0),i(!1),a&&a()},className:`max-h-full max-w-full object-contain group-hover:scale-105 transition-all duration-500 ${o?"opacity-0":"opacity-100"}`,loading:"lazy"})]}):t.jsx("div",{className:"w-full h-full bg-gray-200 flex items-center justify-center",children:t.jsxs("div",{className:"flex flex-col items-center gap-2 opacity-40",children:[t.jsx("svg",{className:"w-10 h-10 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.587-1.587a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})}),t.jsx("span",{className:"text-[10px] font-semibold uppercase tracking-wider text-gray-500",children:"No Image"})]})})})}),t.jsxs("div",{className:"p-3 sm:p-4 text-start",children:[t.jsx(n,{href:`/product-details/${e.slug}`,prefetch:!0,children:t.jsx("h3",{className:"text-xs sm:text-sm font-medium text-gray-700 min-h-10 line-clamp-2",children:e.name})}),t.jsx("div",{className:"mt-2 flex flex-col",children:e.effective_price<e.price?t.jsxs(t.Fragment,{children:[e.active_campaign_product&&t.jsx("div",{className:"text-[10px] font-bold text-red uppercase mb-0.5",children:e.active_campaign_product.discount_type==="percentage"?`SAVE ${Math.round(e.active_campaign_product.discount_value)}%`:`SAVE ${e.active_campaign_product.discount_value} ${r||"DKK."}`}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsxs("span",{className:"text-base font-bold text-gray-900",children:[r||"DKK.",e.effective_price]}),t.jsxs("span",{className:"text-xs text-gray-400 line-through",children:[r||"DKK.",e.price]})]})]}):t.jsxs("span",{className:"text-base font-bold text-gray-900",children:[r||"DKK.",e.price]})}),t.jsxs("p",{className:"mt-1 text-xs font-medium flex items-center gap-1.5",children:[t.jsx("span",{className:e.qty>0?"text-green-600":"text-red-500",children:"â—"}),e.qty>0?`In Stock ${e.qty}`:"Out of Stock"]}),t.jsxs("div",{className:"mt-3 flex flex-col gap-2",children:[v?t.jsx(n,{href:`/product-details/${e.slug}`,prefetch:!0,className:`\r
                        w-full bg-gray-800 text-white \r
                        py-2 px-4 rounded-lg text-sm font-medium\r
                        hover:bg-gray-900 active:scale-98 transition-all duration-200\r
                        flex items-center justify-center gap-2 cursor-pointer\r
                      `,children:"Select Options"}):t.jsxs("button",{onClick:b,disabled:l||d,className:`\r
                        w-full bg-red text-white \r
                        py-2 px-4 rounded-lg text-sm font-medium\r
                        hover:bg-red-800 active:scale-98 transition-all duration-200\r
                        flex items-center justify-center gap-2 cursor-pointer\r
                        disabled:opacity-50 disabled:cursor-not-allowed\r
                      `,children:[t.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 3h2l.4 2M7 13h10l4-8H5.4M7 13L5.4 5M7 13l-2.293 2.293c-.63.63-.184 1.707.707 1.707H17m0 0a2 2 0 100 4 2 2 0 000-4zm-8 2a2 2 0 11-4 0 2 2 0 014 0z"})}),"Add to Cart"]}),t.jsx(n,{href:`/product-details/${e.slug}`,prefetch:!0,className:`\r
                      w-full bg-white text-gray-800 border border-gray-400\r
                      py-2 px-4 rounded-lg text-sm font-medium\r
                      hover:bg-gray-50 active:scale-98 transition-all duration-200\r
                      flex items-center justify-center gap-2 cursor-pointer\r
                    `,children:"Details"})]})]})]})};export{A as P};
